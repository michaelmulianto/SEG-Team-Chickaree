{% extends 'base_content.html'%}
{% block title %}
| {{club.name}}
{% endblock %}
{% block content %}
{% include 'partials/js_confirm_messages.html'%}
{% load static %}
{% load define_action %}
{% check_is_lead_organiser current_user tournament as is_lead_organiser %}

{% get_organisers tournament as organisers %}
{% get_officers_and_owner current_user tournament as officers_and_owner %}

  <div class="container">
    <div class="row">
      <div class="col-12">
        {%csrf_token%}
        <h1 style=font-size:50px><b>{{ tournament.name }}</b></h1>
        <br>
        <p>A tournament by {{ tournament.club.name }}. </p>
        <p>{{ tournament.description }} </p>
        <p><i class="bi bi-people-fill"></i> {{ tournament.capacity }} participants<p>
        <br>
        <h3><b>Organisers</b></h3>
        <style>
          .standard-chess-table{
            vertical-align: middle;
            border-spacing: 10px 2px;
          }
        </style>
        <table id="owner" class="table standard-chess-table">
          <tr>
            {% include 'member_list_partials/table_header_basics.html' with include_counter=True %}
            {% include 'member_list_partials/table_header_extras.html' with show_email=True %}
          </tr>
          {% for organiser in organisers %}
          <tr>
            {% include 'member_list_partials/table_row_basics.html' with user=organiser.member.user include_counter=True %}
            {% include 'member_list_partials/table_row_extras.html' with user=organiser.member.user show_email=True %}
          </tr>
          {% endfor %}
        </table>
        <br>

        <table class="table standard-table-spacing">
          <tr>

            <td><h3> Add organisers: </h3></td>


            <td><select class="form-select" aria-label="Default select example" id="other_possible_organisers">
              
              {% for member in officers_and_owner %}
                {% if officers_and_owner.count == 0 %}
                  <p>No other possible organisers</p>
                {% else %}
                  <option selected>Select other organiser</option>
                    {% if is_organser member %}
                      <a class="dropdown-item" href="#" aria-disabled="true" >@{{ member.user.username }}</a>
                    {% else %}
                      <a class="dropdown-item" href="#" value= {{member.id}}>@{{ member.user.username }}</a>
                    {%endif%}
                {% endif %}
              {% endfor %}

            </select></td>

            <td><a style="float: right;" href='{% url "add_organiser_to_tournament" tournament.id document.getElementById("other_possible_organisers").value %}' class="btn btn-primary"><i class="bi bi-person-plus-fill"></i> Add Co-Organiser</a></td>
          </tr>
        </table>

        <br>
        <br>
        <a href='{% url 'show_club' tournament.club.id %}' class="btn btn-info">
          <i class="bi bi-reply-fill"></i> Back to club
        </a>
        <br>
        <br>
        <br>
      </div>
    </div>
  </div>
{% endblock %}
