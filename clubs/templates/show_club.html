{% extends 'base_content.html'%}
{% block title %}
| {{club.name}}
{% endblock %}
{% block content %}
  <div class="container">
    <div class="row">
      <div class="col-12">
        {%csrf_token%}
        <h1><b>{{club.name}}</b></h1>
        <P><B>Location: </b> {{club.location}}</p>
        <p><b>Description: </b> {{club.description}} </p>
        <p><b>Number of Members: </b> {{members}} </p>
        {% if userIsMember == False %}
          <b>Owner: </b>
          <table class="table">
            <td><b></b></td>
            <td><b>Username</b></td>
            <td><b>Last Name</b></td>
            <td><b>First Name</b></td>
            <td><b>Bio</b></td>
            {% if userIsOwner or userIsOfficer%}
            <td><b>Email</b></td>
            {%endif%}
          <tr>
            <td> <img src="{{user.mini_gravatar}}" alt="Gravatar" style="border-radius: 50%"> </td>
            <td><a>{{owner.user}} </a></td>
            <td><a>{{owner.user.last_name}} </a></td>
            <td><a>{{owner.user.first_name}} </a></td>
            <td><a>{{owner.user.bio}} </a></td>
            {% if userIsOwner or userIsOfficer%}
            <td><a>{{ owner.user.email }}</a></td>
            {%endif%}
            <td><i></i></td>
          </tr>
          </table>
        {% else %}
          <b>Officers: </b>
          {%if officerCount == 0%}
            <td><a>No Officers</a></td>

          {%else%}
            <table class="table">
              <td><b></b></td>
              <td><b>Username</b></td>
              <td><b>Last Name</b></td>
              <td><b>First Name</b></td>
              {% if userIsOwner or userIsOfficer%}
              <td><b>Email</b></td>
              {%endif%}

              {% for officer in officers %}
              <tr>
                <td><a> <img src="{{user.mini_gravatar}}" alt="Gravatar" style="border-radius: 50%"> </a></td>
                <td><a>{{ officer.user }}</a></td>
                <td><a>{{ officer.user.last_name }}</a></td>
                <td><a>{{ officer.user.first_name }}</a></td>
                {% if userIsOwner == True%}
                <td><a>{{ officer.user.email }}</a></td>
                {%endif%}
                {% if userIsOfficer == True%}
                <td><a>{{ officer.user.email }}</a></td>
                {%endif%}
                <td><i></i></td>
              </tr>
              {% endfor %}
              {%endif%}

            </table>
            <p></p>
            <td><a href='{% url 'members_list' club.id %}' class="btn btn-primary">Show Members</a></td>
        {%endif%}

        {% load static %}
        {% load define_action %}
        {% check_has_applied club current_user as has_applied %}
        <script>
          function confirmWithdrawApplication(){
            if(confirm('Are you sure you want to withdraw your application?')){
              return true;
            }else{
              event.stopPropagation(); event.preventDefault();
            }
          }
          function confirmLeaveClub(){
            if(confirm('Are you sure you want to leave the club?')){
              return true;
            }else{
              event.stopPropagation(); event.preventDefault();
            }
          }
          function confirmDeleteClub(){
            if(confirm('Are you sure you want to delete this club?')){
              return true;
            }else{
              event.stopPropagation(); event.preventDefault();
            }
          }
          </script>

        {% if userIsOwner == True%}
          <td><a href='{% url 'banned_members' club.id %}' class="btn btn-primary">Banned Members</a></td>
          <td><a href='{% url 'edit_club_info' club.id %}' class="btn btn-primary">Edit</a></td>
          <td><a href='{% url 'show_applications_to_club' club.id %}' class="btn btn-primary">Show Applications</a></td>
          <td><a href='{% url 'delete_club' club.id %}' class="btn btn-danger" onclick="confirmDeleteClub()">Delete Club</a></td>
        {%endif%}
        {% if userIsOfficer == True%}
          <td><a href='{% url 'banned_members' club.id %}' class="btn btn-primary">Banned Members</a></td>
          <td><a href='{% url 'show_applications_to_club' club.id %}' class="btn btn-primary">Show Applications</a></td>
        {%endif%}

          {% if has_applied %}
          <td style="vertical-align: bottom; padding: 20px"><a href='{% url 'withdraw_application_to_club' club.id %}' onclick="confirmWithdrawApplication()" class="btn btn-warning">Withdraw application</a></td>
          {% elif userIsMember %}
          {% check_is_owner club current_user as is_owner %}
          {% if is_owner %}
          <td style="text-align: center; vertical-align: bottom; padding: 25px"> You are the owner. </td>
          {% else %}
          <td style="vertical-align: bottom; padding: 25px"><a href='{% url 'leave_club' club.id %}' onclick="confirmLeaveClub()" class="btn btn-danger">Leave club</a></td>
          {% endif%}
          {% else %}
          <td style="vertical-align: bottom; padding: 20px"><a href='{% url 'apply_to_club' club.id %}' class="btn btn-success">Apply to club</a></td>
          {% endif %}
      </div>
    </div>
  </div>
{% endblock %}
